<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Eternal SMP - OC Registration</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&display=swap">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      background-color: #111;
      color: #ffd700;
      font-family: 'Segoe UI', sans-serif;
      background-image: radial-gradient(circle at top, #222 0%, #111 100%);
      overflow-x: hidden;
    }
    header {
      background-color: #000;
      padding: 16px 32px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #333;
    }
    .logo {
      font-family: 'Cinzel', serif;
      font-size: 24px;
      color: #ffd700;
      animation: glow 2s ease-in-out infinite alternate;
    }
    @keyframes glow {
      from { text-shadow: 0 0 5px #ffd700, 0 0 10px #ffae00; }
      to { text-shadow: 0 0 20px #fff000, 0 0 30px #ffaa00; }
    }
    .container {
      max-width: 800px;
      margin: auto;
      padding: 40px 20px;
      animation: fadeIn 0.6s ease forwards;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .logo-img {
      display: block;
      max-width: 500px;
      width: 100%;
      margin: 0 auto 32px;
    }
    .btn {
      display: inline-block;
      margin: 12px auto;
      padding: 12px 28px;
      background-color: #ffd700;
      color: #000;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      font-size: 18px;
      cursor: pointer;
      text-align: center;
    }
    .hidden { display: none; }
    textarea, select, input {
      width: 100%;
      background: #000;
      color: #ffd700;
      padding: 12px;
      border: 1px solid #555;
      border-radius: 6px;
      margin-bottom: 20px;
    }
    label { font-weight: bold; display: block; margin-bottom: 6px; }
    pre {
      background: #000;
      padding: 20px;
      border: 1px solid #ffd700;
      border-radius: 10px;
      white-space: pre-wrap;
      word-break: break-word;
    }
    footer {
      background: #000;
      color: #999;
      text-align: center;
      padding: 40px 20px;
    }
    ul.social {
      list-style: none;
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 20px;
      padding: 0;
    }
    ul.social li a {
      color: #ffd700;
      font-size: 24px;
      transition: transform 0.3s;
    }
    ul.social li a:hover {
      transform: scale(1.2);
      color: white;
    }
    @media (max-width: 600px) {
      .container { padding: 20px 15px; }
      .btn { width: 100%; }
    }
  </style>
</head>
<body>
  <audio id="clickSound" src="https://raw.githubusercontent.com/marcellnw/eternalsmp-pendaftaran-oc/main/click.m4a"></audio>
  <audio id="flipSound" src="https://raw.githubusercontent.com/marcellnw/eternalsmp-pendaftaran-oc/main/Page_Flip_3(128k).m4a"></audio>

  <header>
    <div class="logo">EternalSMP</div>
    <button class="btn" onclick="openContactPage()">Kontak</button>
  </header>

  <div class="container" id="homePage">
    <img src="https://raw.githubusercontent.com/marcellnw/Gambar/main/20250702_183405.png" class="logo-img" alt="Eternal SMP Logo" />
    <p style="text-align:center; max-width:700px; margin:auto; font-size:17px">
      Selamat datang di pendaftaran karakter Eternal SMP Season 14: <strong>The Great Fearssade</strong>. Siapkan karaktermu dan jadilah bagian dari cerita epik dunia fantasi yang terus berkembang!
    </p>
    <div style="text-align:center">
      <button class="btn" onclick="playClick(); openForm()">Daftar Sekarang</button>
    </div>
  </div>

  <div class="container hidden" id="formPage">
    <h2>Pendaftaran Karakter OC</h2>
    <form id="ocForm">
      <label>Nama Gamertag *</label>
      <input type="text" name="gamertag" required>

      <label>Nama Karakter OC *</label>
      <input type="text" name="ocname" required>

      <label>Ras *</label>
      <select name="race" required>
        <option value="">-- Pilih --</option>
        <option value="Euria">Euria - Peri cahaya, penjaga alam</option>
        <option value="Graveth">Graveth - Ras kuat ahli sihir gelap</option>
        <option value="Maredien">Maredien - Bangsawan diplomatis</option>
        <option value="Heretic">Heretic - Pemilik sihir terlarang</option>
        <option value="Diablonic">Diablonic - Iblis haus kuasa</option>
        <option value="Laurian">Laurian - Pemburu & pelindung hutan</option>
      </select>

      <label>Class *</label>
      <select name="class" required>
        <option value="">-- Pilih --</option>
        <option>Warrior - Petarung seimbang</option>
        <option>Berserker - Liar & brutal</option>
        <option>Tank - Pertahanan tinggi</option>
        <option>Lancer - Cepat & menusuk</option>
        <option>Rogue - Licik & lincah</option>
        <option>Hunter - Jarak jauh</option>
        <option>Ronin - Pendekar bebas</option>
        <option>Swordmage - Pedang & sihir</option>
        <option>Priest - Penyembuh</option>
      </select>

      <label>Job *</label>
      <select name="job" required>
        <option value="">-- Pilih --</option>
        <option>Alchemist - Pembuat ramuan</option>
        <option>Blacksmith - Pandai besi</option>
        <option>Trader - Ahli jual beli</option>
        <option>Farmer - Petani</option>
        <option>Nitwit - Awal tanpa keahlian</option>
      </select>

      <label>Role Sosial *</label>
      <select name="role" required>
        <option value="">-- Pilih --</option>
        <option>Raja - Pemimpin utama</option>
        <option>Bangsawan - Tokoh berpengaruh</option>
        <option>Royalis - Pendukung kerajaan</option>
        <option>Worker - Rakyat biasa</option>
      </select>

      <label>Sifat & Kepribadian *</label>
      <textarea name="sifat" minlength="50" required></textarea>

      <label>Lore & Background *</label>
      <textarea name="lore" minlength="100" required></textarea>

      <label>Tujuan & Motivasi *</label>
      <textarea name="tujuan" minlength="50" required></textarea>

      <label>Upload Gambar Karakter (Opsional)</label>
      <input type="file" name="image" accept="image/*" />

      <div style="text-align:center">
        <button type="button" class="btn" onclick="playClick(); showPreview()">Preview</button>
        <button type="button" class="btn" onclick="playFlip(); backToHome()">Kembali</button>
      </div>
    </form>
  </div>

  <div class="container hidden" id="previewPage">
    <h2>Preview Karakter OC</h2>
    <pre id="previewContent"></pre>
    <div style="text-align:center">
      <button class="btn" onclick="playClick(); backToForm()">Kembali ke Formulir</button>
      <button class="btn" onclick="playClick(); submitToDiscord()">Kirim Pendaftaran</button>
    </div>
  </div>

  <div class="container hidden" id="contactPage">
    <h2>Kontak Admin</h2>
    <ul>
      <li>WhatsApp: <a href="https://wa.me/6281323146137">0813-2314-6137</a></li>
      <li>Instagram: <a href="https://instagram.com/eternalsmp">@eternalsmp</a></li>
      <li>Discord: <a href="https://discord.gg/YCGvq8W3Bp">Join Server</a></li>
    </ul>
    <div style="text-align:center">
      <button class="btn" onclick="playFlip(); backToHome()">Kembali</button>
    </div>
  </div>

  <footer>
    <p>&copy; 2025 Eternal SMP. All rights reserved.</p>
    <ul class="social">
      <li><a href="https://instagram.com/eternalsmp"><i class="fab fa-instagram"></i></a></li>
      <li><a href="https://youtube.com/@eternalsmpserver"><i class="fab fa-youtube"></i></a></li>
      <li><a href="https://www.tiktok.com/@eternalsmpserver"><i class="fab fa-tiktok"></i></a></li>
    </ul>
  </footer>

  <script>
    function playClick() {
      document.getElementById("clickSound").play();
    }
    function playFlip() {
      document.getElementById("flipSound").play();
    }

    function showPage(pageId) {
      document.querySelectorAll(".container").forEach(div => div.classList.add("hidden"));
      document.getElementById(pageId).classList.remove("hidden");
    }

    function openForm() { showPage("formPage"); }
    function backToHome() { showPage("homePage"); }
    function backToForm() { showPage("formPage"); }
    function openContactPage() { showPage("contactPage"); }

    function showPreview() {
      const form = document.getElementById("ocForm");
      if (!form.checkValidity()) {
        form.reportValidity();
        return;
      }
      const data = new FormData(form);
      let content = "";
      for (let [key, value] of data.entries()) {
        if (key !== "image") {
          content += `${key.toUpperCase()}:\n${value}\n\n`;
        }
      }
      document.getElementById("previewContent").innerText = content;
      showPage("previewPage");
    }

    async function submitToDiscord() {
      const form = document.getElementById("ocForm");
      const data = new FormData(form);
      const fields = [];

      for (let [key, value] of data.entries()) {
        if (key !== "image") {
          fields.push({ name: key, value: value, inline: false });
        }
      }

      const webhook = "https://discord.com/api/webhooks/1251797537002623067/97qDk77RyP3Wz1c70usLIxFoWz-URJz7rR0jn8kW_loLgLHyLfktLO9QeJHlkyznx3Qj";

      const imageFile = data.get("image");
      if (imageFile && imageFile.name) {
        const buffer = await imageFile.arrayBuffer();
        const blob = new Blob([buffer], { type: imageFile.type });
        const formData = new FormData();
        formData.append("file", blob, imageFile.name);
        formData.append("payload_json", JSON.stringify({
          username: "EternalSMP OC Register",
          embeds: [{
            title: "üõ°Ô∏è Pendaftaran Karakter Baru",
            description: "Berikut detail karakter OC yang telah dikirim:",
            color: 16766720,
            fields: fields,
            image: { url: "attachment://" + imageFile.name }
          }]
        }));
        fetch(webhook, { method: "POST", body: formData });
      } else {
        fetch(webhook, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            username: "EternalSMP OC Register",
            embeds: [{
              title: "üõ°Ô∏è Pendaftaran Karakter Baru",
              description: "Berikut detail karakter OC yang telah dikirim:",
              color: 16766720,
              fields: fields
            }]
          })
        });
      }

      alert("Pendaftaran berhasil dikirim ke Discord!");
      location.reload();
    }
  </script>
</body>
</html>